# Runs quality checks on branches and PRs to main
# Uses reusable workflow to avoid duplication with release pipeline
name: Continuous Integration

"on":
  push:
    branches: ["**"]
  # Run on pull requests that target the main branch
  pull_request:
    branches: [main]

jobs:
  lint-workflows:
    name: Lint Workflow Files
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - uses: actions/checkout@v6
        with:
          fetch-depth: 1
      - uses: devops-actions/actionlint@v0.1.10

  quality-checks:
    # Runs in parallel with lint-workflows (no dependency)
    uses: ./.github/workflows/reusable-checks.yml
    secrets: inherit
    with:
      python-version: "3.13"
      test-command: make test
      upload-coverage: false
